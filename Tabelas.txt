CREATE TABLE SUPERVISOR(
	Nome VARCHAR(30),
    Sexo CHAR NOT NULL,
    RG VARCHAR(7) UNIQUE NOT NULL,
    CPF VARCHAR(11),
    Salario REAL NOT NULL,
    Nascimento Date NOT NULL,
    PRIMARY KEY (CPF)
);

CREATE TABLE VENDEDOR(
	Nome VARCHAR(30) NOT NULL,
    Sexo CHAR NOT NULL,
    RG VARCHAR(7) UNIQUE NOT NULL,
    CPF VARCHAR(11),
    Salario REAL NOT NULL,
    Nascimento Date NOT NULL,
    CNH VARCHAR(11) UNIQUE NOT NULL,
    Codigo VARCHAR(4) UNIQUE NOT NULL,
    CPFSupervisor VARCHAR(11),
    Volume int NOT NULL,
    PRIMARY KEY (CPF),
    FOREIGN KEY (CPFSupervisor) REFERENCES 
    SUPERVISOR(CPF) ON DELETE RESTRICT ON 
    UPDATE CASCADE
);

CREATE TABLE SECRETARIO(
	Nome VARCHAR(30),
    Sexo CHAR NOT NULL,
    RG VARCHAR(7) UNIQUE NOT NULL,
    CPF VARCHAR(11),
    Salario REAL NOT NULL,
    Nascimento Date NOT NULL,
    PRIMARY KEY (CPF)
);

CREATE TABLE ESTOQUISTA(
	Nome VARCHAR(30),
    Sexo CHAR NOT NULL,
    RG VARCHAR(7) UNIQUE NOT NULL,
    CPF VARCHAR(11),
    Salario REAL NOT NULL,
    Nascimento Date NOT NULL,
    PRIMARY KEY (CPF)
);

CREATE TABLE ENTREGADOR(
	Nome VARCHAR(30),
    Sexo CHAR NOT NULL,
    RG VARCHAR(7) UNIQUE NOT NULL,
    CPF VARCHAR(11),
    Salario REAL NOT NULL,
    Nascimento Date NOT NULL,
    CNH VARCHAR(11) UNIQUE NOT NULL,
    PRIMARY KEY (CPF)
);

CREATE TABLE CAMINHAO(
  Placa VARCHAR(7),
  Modelo VARCHAR(7) NOT NULL,
  Montadora VARCHAR(10) NOT NULL,
  Categoria VARCHAR(10) NOT NULL,
  PRIMARY KEY (Placa)
);

CREATE TABLE MERCADORIA (
	Preço REAL NOT NULL,
    Codigo int,
    Tipo VARCHAR(10) NOT NULL,
    Nome VARCHAR(10) NOT NULL,
    PRIMARY KEY (Codigo)
);

CREATE TABLE CLIENTE(
	NomeEstabelecimento VARCHAR(15) NOT NULL,
    CPF VARCHAR(11),
    Rua VARCHAR(15) NOT NULL,
    Bairro VARCHAR(15) NOT NULL,
    Cidade VARCHAR(15) NOT NULL,
    PRIMARY KEY (CPF)
);

CREATE TABLE VENDA (
	Codigo int,
    Hora VARCHAR(5) NOT NULL,
    Cidade VARCHAR(20) NOT NULL,
    Data DATE NOT NULL,
    ValorTotal REAL NOT NULL,
    CPFVendedor VARCHAR(11) NOT NULL,
    Comissao REAL NOT NULL,
    CPFSecretario VARCHAR(11) NOT NULL,
    CPFCliente VARCHAR(11) NOT NULL,
    PRIMARY KEY (Codigo),
    FOREIGN KEY (CPFVendedor) REFERENCES VENDEDOR(CPF) 
    ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (CPFSecretario)REFERENCES SECRETARIO(CPF) 
    ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (CPFCliente) REFERENCES CLIENTE(CPF) 
    ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE TEM_MERCADORIA(
	CodVenda int,
    CodMercadoria int,
    Quantidade int NOT NULL,
    PreçoUnitario REAL NOT NULL,
    PRIMARY KEY (CodVenda, CodMercadoria),
    FOREIGN KEY (CodVenda) REFERENCES VENDA(Codigo) 
    ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (CodMercadoria) REFERENCES MERCADORIA(Codigo) 
    ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE CONTROLA_MERCADORIA(
	CPFEstoquista VARCHAR(11) NOT NULL,
    CodMercadoria int NOT NULL,
    Quantidade int NOT NULL,
    PRIMARY KEY (CPFEstoquista, CodMercadoria),
    FOREIGN KEY (CPFEstoquista) REFERENCES ESTOQUISTA(CPF)
    ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (CodMercadoria) REFERENCES MERCADORIA(Codigo)
    ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE ENTREGA_MERCADORIA(
	CPFEntregador VARCHAR(11) NOT NULL,
    CodMercadoria int NOT NULL,
    PRIMARY KEY (CPFEntregador, CodMercadoria),
    FOREIGN KEY (CPFEntregador) REFERENCES ENTREGADOR(CPF)
    ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (CodMercadoria) REFERENCES MERCADORIA(Codigo)
    ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE USA_CAMINHÃO(
	PlacaCaminhao VARCHAR(7),
    CPFEntregador VARCHAR(11),
    PRIMARY KEY (PlacaCaminhao, CPFEntregador),
    FOREIGN KEY (PlacaCaminhao) REFERENCES CAMINHAO(Placa)
    ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (CPFEntregador) REFERENCES ENTREGADOR(CPF)
   	ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE INFORMA_ESTOQUISTA(
	CPFSecretario VARCHAR(11),
    CPFEstoquista VARCHAR(11),
    PRIMARY KEY (CPFSecretario, CPFEstoquista),
    FOREIGN KEY (CPFSecretario) REFERENCES SECRETARIO(CPF)
    ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY(CPFEstoquista) REFERENCES ESTOQUISTA(CPF)
    ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE INFORMA_ENTREGADOR(
	CPFEstoquista VARCHAR(11),
    CPFEntregador VARCHAR(11),
    PRIMARY KEY (CPFEstoquista, CPFEntregador),
    FOREIGN KEY (CPFEstoquista) REFERENCES ESTOQUISTA(CPF)
    ON DELETE RESTRICT ON UPDATE CASCADE,
     FOREIGN KEY (CPFEntregador) REFERENCES ENTREGADOR(CPF)
    ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE TELEFONE_FUNCIONARIO(
	CPFFuncionario VARCHAR(11),
    Telefone VARCHAR(9),
    PRIMARY KEY (CPFFuncionario, Telefone),
    FOREIGN KEY (CPFFuncionario) REFERENCES 
    VENDEDOR(CPF) ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (CPFFuncionario) REFERENCES 
    SECRETARIO(CPF) ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (CPFFuncionario) REFERENCES 
    ESTOQUISTA(CPF) ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (CPFFuncionario) REFERENCES 
    ENTREGADOR(CPF) ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (CPFFuncionario) REFERENCES 
    SUPERVISOR(CPF) ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE CIDADES_VENDEDOR(
	CPFVendedor VARCHAR(4),
    Cidade VARCHAR(15),
    PRIMARY KEY (CPFVendedor, Cidade),
    FOREIGN KEY (CPFVendedor) REFERENCES VENDEDOR(CPF)
    ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE TELEFONE_CLIENTE(
	CPFCliente VARCHAR(11),
    Telefone VARCHAR(9),
    PRIMARY KEY (CPFCliente, Telefone),
    FOREIGN KEY (CPFCliente) REFERENCES CLIENTE(CPF)
    ON DELETE RESTRICT ON UPDATE CASCADE
);



